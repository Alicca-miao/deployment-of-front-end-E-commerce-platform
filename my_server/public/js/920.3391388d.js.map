{"version":3,"file":"js/920.3391388d.js","mappings":"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","sources":["webpack://sph_230410/./src/pages/ShopCart/index.vue","webpack://sph_230410/src/pages/ShopCart/index.vue","webpack://sph_230410/./src/pages/ShopCart/index.vue?86ac","webpack://sph_230410/./src/pages/ShopCart/index.vue?fa5f"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[(_vm.cartInfoList.length)?_c('div',{staticClass:\"cart\"},[_c('h4',[_vm._v(\"全部商品\")]),_c('div',{staticClass:\"cart-main\"},[_vm._m(0),_c('div',{staticClass:\"cart-body\"},_vm._l((_vm.cartInfoList),function(cartInfo){return _c('ul',{key:cartInfo.id,staticClass:\"cart-list\"},[_c('li',{staticClass:\"cart-list-con1\"},[_c('input',{attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":cartInfo.isChecked},on:{\"click\":function($event){$event.preventDefault();return _vm.checkOne(cartInfo)}}})]),_c('li',{staticClass:\"cart-list-con2\"},[_c('img',{attrs:{\"src\":cartInfo.imgUrl}}),_c('div',{staticClass:\"item-msg\"},[_vm._v(_vm._s(cartInfo.skuName))])]),_c('li',{staticClass:\"cart-list-con4\"},[_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(cartInfo.cartPrice))])]),_c('li',{staticClass:\"cart-list-con5\"},[_c('a',{staticClass:\"mins\",on:{\"click\":function($event){return _vm.changeSkuNum('decrement',cartInfo)}}},[_vm._v(\"-\")]),_c('input',{staticClass:\"itxt\",attrs:{\"type\":\"text\"},domProps:{\"value\":cartInfo.skuNum},on:{\"change\":function($event){return _vm.changeSkuNum('input', cartInfo, $event)}}}),_c('a',{staticClass:\"plus\",on:{\"click\":function($event){return _vm.changeSkuNum('increment',cartInfo)}}},[_vm._v(\"+\")])]),_c('li',{staticClass:\"cart-list-con6\"},[_c('span',{staticClass:\"sum\"},[_vm._v(_vm._s(cartInfo.cartPrice * cartInfo.skuNum))])]),_c('li',{staticClass:\"cart-list-con7\"},[_c('a',{staticClass:\"sindelet\",on:{\"click\":function($event){return _vm.deleteOne(cartInfo.skuId)}}},[_vm._v(\"删除\")]),_c('br')])])}),0)]),_c('div',{staticClass:\"cart-tool\"},[_c('div',{staticClass:\"select-all\"},[_c('input',{staticClass:\"chooseAll\",attrs:{\"type\":\"checkbox\"},domProps:{\"checked\":_vm.isAll},on:{\"click\":function($event){$event.preventDefault();return _vm.checkAll.apply(null, arguments)}}}),_c('span',[_vm._v(\"全选\")])]),_c('div',{staticClass:\"option\"},[_c('a',{on:{\"click\":_vm.batchDlete}},[_vm._v(\"删除选中的商品\")])]),_c('div',{staticClass:\"money-box\"},[_c('div',{staticClass:\"chosed\"},[_vm._v(\" 已选择 \"),_c('span',[_vm._v(_vm._s(_vm.total))]),_vm._v(\"件商品 \")]),_c('div',{staticClass:\"sumprice\"},[_c('em',[_vm._v(\"总价（不含运费） ：\")]),_c('i',{staticClass:\"summoney\"},[_vm._v(_vm._s(_vm.totalPrice))])]),_c('div',{staticClass:\"sumbtn\"},[_c('router-link',{staticClass:\"sum-btn\",attrs:{\"to\":\"/trade\"}},[_vm._v(\"结算\")])],1)])])]):_vm._e(),(!_vm.cartInfoList.length)?_c('div',{staticClass:\"empty\"},[_c('hr'),_c('img',{attrs:{\"src\":\"http://49.232.112.44/images/empty.gif\",\"alt\":\"\"}}),_c('h2',[_vm._v(\"购物车空空如也\")])]):_vm._e()])\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"cart-th\"},[_c('div',{staticClass:\"cart-th1\"},[_vm._v(\"全部\")]),_c('div',{staticClass:\"cart-th2\"},[_vm._v(\"商品\")]),_c('div',{staticClass:\"cart-th3\"},[_vm._v(\"单价（元）\")]),_c('div',{staticClass:\"cart-th4\"},[_vm._v(\"数量\")]),_c('div',{staticClass:\"cart-th5\"},[_vm._v(\"小计（元）\")]),_c('div',{staticClass:\"cart-th6\"},[_vm._v(\"操作\")])])\n}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 购物车 -->\r\n    <div class=\"cart\" v-if=\"cartInfoList.length\">\r\n      <h4>全部商品</h4>\r\n      <div class=\"cart-main\">\r\n        <div class=\"cart-th\">\r\n          <div class=\"cart-th1\">全部</div>\r\n          <div class=\"cart-th2\">商品</div>\r\n          <div class=\"cart-th3\">单价（元）</div>\r\n          <div class=\"cart-th4\">数量</div>\r\n          <div class=\"cart-th5\">小计（元）</div>\r\n          <div class=\"cart-th6\">操作</div>\r\n        </div>\r\n        <!-- 购物车列表 -->\r\n        <div class=\"cart-body\">\r\n          <!-- 一个ul就是购物车中的一条记录 -->\r\n          <ul\r\n            class=\"cart-list\"\r\n            v-for=\"cartInfo in cartInfoList\"\r\n            :key=\"cartInfo.id\"\r\n          >\r\n            <!-- 选中状态 -->\r\n            <li class=\"cart-list-con1\">\r\n              <input\r\n                type=\"checkbox\"\r\n                :checked=\"cartInfo.isChecked\"\r\n                @click.prevent=\"checkOne(cartInfo)\"\r\n              />\r\n            </li>\r\n            <!-- 商品名称 -->\r\n            <li class=\"cart-list-con2\">\r\n              <img :src=\"cartInfo.imgUrl\" />\r\n              <div class=\"item-msg\">{{ cartInfo.skuName }}</div>\r\n            </li>\r\n            <!-- 商品价格 -->\r\n            <li class=\"cart-list-con4\">\r\n              <span class=\"price\">{{ cartInfo.cartPrice }}</span>\r\n            </li>\r\n\r\n            <!-- 数量操作 -->\r\n            <li class=\"cart-list-con5\">\r\n              <a @click=\"changeSkuNum('decrement',cartInfo)\" class=\"mins\">-</a>\r\n              <input\r\n                type=\"text\"\r\n                class=\"itxt\"\r\n                :value=\"cartInfo.skuNum\"\r\n                @change=\"changeSkuNum('input', cartInfo, $event)\"\r\n              />\r\n              <a @click=\"changeSkuNum('increment',cartInfo)\" class=\"plus\">+</a>\r\n            </li>\r\n\r\n            <!-- 小计 -->\r\n            <li class=\"cart-list-con6\">\r\n              <span class=\"sum\">{{\r\n                cartInfo.cartPrice * cartInfo.skuNum\r\n              }}</span>\r\n            </li>\r\n            <!-- 删除 -->\r\n            <li class=\"cart-list-con7\">\r\n              <a class=\"sindelet\" @click=\"deleteOne(cartInfo.skuId)\">删除</a>\r\n              <br />\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <!-- 底部功能区 -->\r\n      <div class=\"cart-tool\">\r\n        <div class=\"select-all\">\r\n          <!-- 全选 -->\r\n          <input\r\n            class=\"chooseAll\"\r\n            type=\"checkbox\"\r\n            :checked=\"isAll\"\r\n            @click.prevent=\"checkAll\"\r\n          />\r\n          <span>全选</span>\r\n        </div>\r\n        <div class=\"option\">\r\n          <!-- 删除 -->\r\n          <a @click=\"batchDlete\">删除选中的商品</a>\r\n        </div>\r\n        <div class=\"money-box\">\r\n          <!-- 统计 -->\r\n          <div class=\"chosed\">\r\n            已选择 <span>{{ total }}</span\r\n            >件商品\r\n          </div>\r\n          <div class=\"sumprice\">\r\n            <em>总价（不含运费） ：</em>\r\n            <i class=\"summoney\">{{ totalPrice }}</i>\r\n          </div>\r\n          <!-- 结算 -->\r\n          <div class=\"sumbtn\">\r\n            <router-link class=\"sum-btn\" to=\"/trade\">结算</router-link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 数据为空展示 -->\r\n    <div class=\"empty\" v-if=\"!cartInfoList.length\">\r\n      <hr />\r\n      <img src=\"http://49.232.112.44/images/empty.gif\" alt=\"\" />\r\n      <h2>购物车空空如也</h2>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  reqCartList,\r\n  reqCheckOne,\r\n  reqCheckAll,\r\n  reqDeleteOne,\r\n  reqBatchDelete,\r\n  reqAddGoodsToCart,\r\n} from \"@/api\";\r\n// import {throttle} from 'lodash'\r\n\r\nexport default {\r\n  name: \"ShopCart\",\r\n  data() {\r\n    return {\r\n      cartInfoList: [],\r\n    };\r\n  },\r\n  computed: {\r\n    // 标识是否全选\r\n    isAll() {\r\n      return this.cartInfoList.every((item) => {\r\n        return item.isChecked === 1;\r\n      });\r\n    },\r\n    // 商品总数\r\n    total() {\r\n      let n = 0;\r\n      this.cartInfoList.forEach((item) => {\r\n        item.isChecked ? (n += item.skuNum) : null;\r\n      });\r\n      return n;\r\n    },\r\n    // 商品总金额\r\n    totalPrice() {\r\n      let n = 0;\r\n      this.cartInfoList.forEach((item) => {\r\n        item.isChecked ? (n += item.skuNum * item.skuPrice) : null;\r\n      });\r\n      return n;\r\n    },\r\n  },\r\n  methods: {\r\n    // 获取购物车列表\r\n    async getCartList() {\r\n      const { code, message, data } = await reqCartList();\r\n      code === 200\r\n        ? (this.cartInfoList = data[0]?.cartInfoList || [])\r\n        : alert(`获取购物车数据失败:${message}`);\r\n    },\r\n    // 勾选购物车中的单个商品\r\n    async checkOne(cartInfo) {\r\n      // 获取当前商品的：编号、勾选状态\r\n      const { skuId, isChecked } = cartInfo;\r\n      // 维护一个新的勾选状态\r\n      const newIsChecked = isChecked === 1 ? 0 : 1;\r\n      // 立刻联系服务器，让服务器那边勾上\r\n      const { code, message } = await reqCheckOne(skuId, newIsChecked);\r\n      // 若服务器那边反馈勾选成功，则维护好本地数据\r\n      if (code === 200) {\r\n        cartInfo.isChecked = newIsChecked;\r\n      } else {\r\n        alert(`勾选失败：${message}`);\r\n      }\r\n    },\r\n    // 勾选购物车中的所有商品\r\n    async checkAll() {\r\n      // 获取购物车总所有商品的id，arr用于保存所有商品id组成的数组\r\n      const arr = [];\r\n      this.cartInfoList.forEach( item => arr.push(item.skuId) );\r\n      // 根据isAll，维护一个newChecked\r\n      const newChecked = this.isAll ? 0 : 1;\r\n      // 发请求\r\n      const { code, message } = await reqCheckAll(arr, newChecked);\r\n      // 判断业务逻辑\r\n      if (code === 200) {\r\n        this.cartInfoList.forEach((item) => {\r\n          item.isChecked = newChecked;\r\n        });\r\n      } else {\r\n        alert(`全选失败：${message}`);\r\n      }\r\n    },\r\n    // 删除一个商品\r\n    async deleteOne(id) {\r\n      if (confirm(\"确定删除吗？\")) {\r\n        const { code, message } = await reqDeleteOne(id);\r\n        if (code === 200) {\r\n          // 维护本地数据，第一种写法\r\n          this.cartInfoList = this.cartInfoList.filter((item) => {\r\n            return item.skuId !== id;\r\n          });\r\n\r\n          // 维护本地数据，第二种写法\r\n          /* let x = 0\r\n            this.cartInfoList.forEach((item,index)=>{\r\n              if(item.skuId === id){\r\n                x = index\r\n              }\r\n            })\r\n            this.cartInfoList.splice(x,1) */\r\n\r\n          // 维护本地数据，第三种写法\r\n          /* const result = this.cartInfoList.find((item,index)=>{\r\n              if(item.skuId === id){\r\n                item.index = index\r\n              }\r\n              return item.skuId === id\r\n            })\r\n            this.cartInfoList.splice(result.index,1) */\r\n        } else {\r\n          alert(`删除失败：${message}`);\r\n        }\r\n      }\r\n    },\r\n    // 删除已选商品\r\n    async batchDlete() {\r\n      if (confirm(\"确定删除已勾选的吗？\")) {\r\n        // 把购物车中，所有勾选了的商品的skuId是收集起来\r\n        const arr = [];\r\n        this.cartInfoList.forEach((item) => {\r\n          item.isChecked ? arr.push(item.skuId) : null;\r\n        });\r\n        // 发请求\r\n        let { code, message } = await reqBatchDelete(arr);\r\n        if (code === 200) {\r\n          // 维护本地数据\r\n          this.cartInfoList = this.cartInfoList.filter((item) => {\r\n            return item.isChecked === 0;\r\n          });\r\n        } else {\r\n          alert(`删除失败：${message}`);\r\n        }\r\n      }\r\n    },\r\n    // 修改购买数量（cartInfo是当前商品信息,event是事件对象）\r\n    async changeSkuNum(type, cartInfo, event) {\r\n      if(this.isLock) {\r\n        return\r\n      }\r\n      this.isLock = true\r\n      // 获取要修改商品的skuId(编号)、skuNum(数量)\r\n      const { skuId, skuNum } = cartInfo;\r\n      switch (type) {\r\n        case \"input\":\r\n          // 获取用户的输入\r\n          const { value } = event.target;\r\n          // 校验数据，若输入的是1~200的合法数据，则进入判断\r\n          if (value >= 1 && value <= 200) {\r\n            // 由于用户输入的可能是小数，所以每次使用value都parseInt一下（举例：12.67 ==> 12）\r\n            // 根据用户的输入和当前的数量，计算出一个差值，因为服务器要的是差值。\r\n            const disNum = parseInt(value) - skuNum;\r\n            // 发请求联系服务器去修改数量，注意：携带的是差值\r\n            const { code, message } = await reqAddGoodsToCart(skuId, disNum);\r\n            // 判断业务逻辑\r\n            if (code === 200) {\r\n              // 维护本地数据\r\n              cartInfo.skuNum = event.target.value =  parseInt(value);\r\n              cartInfo.isChecked = 1\r\n            } else {\r\n              alert(`修改商品数量失败：${message}`);\r\n              // 若修改失败后，要将页面上的呈现置为原来的值\r\n              event.target.value = skuNum;\r\n            }\r\n          } else if (value > 200) {\r\n            // 进入到这里，证明输入的是不合法，其实就是输入的太多了，可原谅；用户的输入直接不要了，直接用200-当前值，得到最大的差值\r\n            const disNum = 200 - skuNum;\r\n            // 发请求\r\n            const { code, message } = await reqAddGoodsToCart(skuId, disNum);\r\n            if (code === 200) {\r\n              // 本地数据调整为最大值—— 200\r\n              cartInfo.skuNum = event.target.value =  200;\r\n              cartInfo.isChecked = 1\r\n            } else {\r\n              alert(`修改商品数量失败：${message}`);\r\n              event.target.value = skuNum;\r\n            }\r\n          } else {\r\n            // 进入到这里，证明输入的是不合法，且不可原谅的那种不合法\r\n            event.target.value = skuNum;\r\n          }\r\n          break;\r\n        case \"increment\":\r\n          if(skuNum === 200){\r\n             alert('最大购买数量为200')\r\n          }else{\r\n            // 发请求修改数量\r\n            const {code,message} = await reqAddGoodsToCart(skuId,1)\r\n            // 请求成功维护本地数据，否则提示\r\n            code === 200 ? (cartInfo.skuNum += 1,cartInfo.isChecked = 1) : alert(`修改数量失败：${message}`)\r\n          }\r\n          break;\r\n        case \"decrement\":\r\n          if(skuNum === 1){\r\n            alert('最小购买数量为1')\r\n          }else{\r\n            // 发请求修改数量\r\n            const {code,message} = await reqAddGoodsToCart(skuId,-1)\r\n            // 请求成功维护本地数据，否则提示\r\n            code === 200 \r\n              ? (cartInfo.skuNum -= 1,cartInfo.isChecked = 1) \r\n              : alert(`修改数量失败：${message}`)\r\n          }\r\n          break;\r\n      }\r\n      this.isLock = false\r\n    },\r\n  },\r\n  mounted() {\r\n    this.getCartList();\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.cart {\r\n  width: 1200px;\r\n  margin: 0 auto;\r\n  h4 {\r\n    margin: 9px 0;\r\n    font-size: 14px;\r\n    line-height: 21px;\r\n  }\r\n  .cart-main {\r\n    .cart-th {\r\n      background: #f5f5f5;\r\n      border: 1px solid #ddd;\r\n      padding: 10px;\r\n      overflow: hidden;\r\n      & > div {\r\n        float: left;\r\n      }\r\n      .cart-th1 {\r\n        width: 25%;\r\n        input {\r\n          vertical-align: middle;\r\n        }\r\n        span {\r\n          vertical-align: middle;\r\n        }\r\n      }\r\n      .cart-th3,\r\n      .cart-th4,\r\n      .cart-th5,\r\n      .cart-th6 {\r\n        width: 12.5%;\r\n      }\r\n      .cart-th2 {\r\n        width: 25%;\r\n      }\r\n      .cart-th4 {\r\n        width: 14.5%;\r\n      }\r\n      .cart-th5 {\r\n        width: 10%;\r\n      }\r\n    }\r\n    .cart-body {\r\n      margin: 15px 0;\r\n      border: 1px solid #ddd;\r\n      .cart-list {\r\n        padding: 10px;\r\n        border-bottom: 1px solid #ddd;\r\n        overflow: hidden;\r\n        display: flex;\r\n        align-items: center;\r\n        &:last-child {\r\n          border-bottom: 0;\r\n        }\r\n        & > li {\r\n          float: left;\r\n        }\r\n        .cart-list-con1 {\r\n          width: 15%;\r\n        }\r\n        .cart-list-con2 {\r\n          width: 35%;\r\n          img {\r\n            width: 82px;\r\n            height: 82px;\r\n            float: left;\r\n          }\r\n          .item-msg {\r\n            float: left;\r\n            width: 150px;\r\n            margin: 0 10px;\r\n            line-height: 20px;\r\n          }\r\n        }\r\n        .cart-list-con4 {\r\n          width: 10%;\r\n        }\r\n        .cart-list-con5 {\r\n          width: 17%;\r\n          .mins {\r\n            border: 1px solid #ddd;\r\n            border-right: 0;\r\n            float: left;\r\n            color: #666;\r\n            width: 18px;\r\n            text-align: center;\r\n            height: 31px;\r\n            line-height: 31px;\r\n            text-decoration: none;\r\n            cursor: pointer;\r\n          }\r\n          input {\r\n            border: 1px solid #ddd;\r\n            width: 40px;\r\n            height: 31px;\r\n            float: left;\r\n            text-align: center;\r\n            font-size: 14px;\r\n            &:focus {\r\n              outline: 0;\r\n            }\r\n          }\r\n\r\n          .plus {\r\n            border: 1px solid #ddd;\r\n            border-left: 0;\r\n            float: left;\r\n            color: #666;\r\n            width: 18px;\r\n            text-align: center;\r\n            height: 31px;\r\n            line-height: 31px;\r\n            text-decoration: none;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n\r\n        .cart-list-con6 {\r\n          width: 10%;\r\n\r\n          .sum {\r\n            font-size: 16px;\r\n          }\r\n        }\r\n\r\n        .cart-list-con7 {\r\n          width: 13%;\r\n\r\n          a {\r\n            color: #666;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .cart-tool {\r\n    overflow: hidden;\r\n    border: 1px solid #ddd;\r\n    height: 50px;\r\n    line-height: 50px;\r\n\r\n    .select-all {\r\n      overflow: hidden;\r\n      height: 50px;\r\n      line-height: 50px;\r\n      padding-left: 12px;\r\n      float: left;\r\n      .chooseAll {\r\n        margin-right: 5px;\r\n      }\r\n\r\n      input {\r\n        vertical-align: middle;\r\n      }\r\n    }\r\n\r\n    .option {\r\n      overflow: hidden;\r\n      height: 50px;\r\n      line-height: 50px;\r\n      float: left;\r\n\r\n      a {\r\n        float: left;\r\n        padding: 0 10px;\r\n        color: #666;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n\r\n    .money-box {\r\n      float: right;\r\n      height: 50px;\r\n\r\n      .chosed {\r\n        line-height: 50px;\r\n        float: left;\r\n        padding: 0 10px;\r\n      }\r\n\r\n      .sumprice {\r\n        width: 200px;\r\n        line-height: 50px;\r\n        float: left;\r\n        padding: 0 10px;\r\n\r\n        .summoney {\r\n          color: #c81623;\r\n          font-weight: 600;\r\n          font-size: 18px;\r\n          vertical-align: middle;\r\n        }\r\n      }\r\n\r\n      .sumbtn {\r\n        float: right;\r\n        a {\r\n          display: block;\r\n          position: relative;\r\n          width: 96px;\r\n          height: 52px;\r\n          line-height: 52px;\r\n          color: #fff;\r\n          text-align: center;\r\n          font-size: 18px;\r\n          font-family: \"Microsoft YaHei\";\r\n          background: #e1251b;\r\n          overflow: hidden;\r\n          text-decoration: none;\r\n          &hover {\r\n            color: white !important;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n.empty {\r\n  text-align: center;\r\n  hr {\r\n    border-top: 1px solid #ddd;\r\n    background-color: #ddd;\r\n  }\r\n  img {\r\n    margin-top: 50px;\r\n    width: 200px;\r\n  }\r\n  h2 {\r\n    color: gray;\r\n    margin-bottom: 50px;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=e1c51ca8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=e1c51ca8&prod&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e1c51ca8\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","cartInfoList","length","staticClass","_v","_m","_l","cartInfo","key","id","attrs","domProps","isChecked","on","$event","preventDefault","checkOne","imgUrl","_s","skuName","cartPrice","changeSkuNum","skuNum","deleteOne","skuId","isAll","checkAll","apply","arguments","batchDlete","total","totalPrice","_e","staticRenderFns","name","data","computed","every","item","n","forEach","skuPrice","methods","getCartList","code","message","reqCartList","alert","newIsChecked","reqCheckOne","arr","push","newChecked","reqCheckAll","confirm","reqDeleteOne","filter","reqBatchDelete","type","event","isLock","value","target","disNum","parseInt","reqAddGoodsToCart","mounted","component"],"sourceRoot":""}