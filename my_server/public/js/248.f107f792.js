"use strict";(self["webpackChunksph_230410"]=self["webpackChunksph_230410"]||[]).push([[248],{6248:function(s,t,e){e.r(t),e.d(t,{default:function(){return I}});var i=function(){var s=this,t=s._self._c;return t("div",{staticClass:"detail"},[t("TypeNav"),s.info?.skuInfo?.id?t("section",{staticClass:"con"},[t("div",{staticClass:"conPoin"},[t("span",[s._v(s._s(s.info.categoryView?.category1Name))]),t("span",[s._v(s._s(s.info.categoryView?.category2Name))]),t("span",[s._v(s._s(s.info.categoryView?.category3Name))])]),t("div",{staticClass:"mainCon"},[t("div",{staticClass:"previewWrap"},[t("Zoom",{attrs:{url:s.info.skuInfo?.skuDefaultImg}}),t("ImageList",{attrs:{imgList:s.info.skuInfo?.skuImageList}})],1),t("div",{staticClass:"InfoWrap"},[t("div",{staticClass:"goodsDetail"},[t("h3",{staticClass:"InfoName"},[s._v(s._s(s.info.skuInfo?.skuName))]),t("p",{staticClass:"news"},[s._v(s._s(s.info.skuInfo?.skuDesc))]),t("div",{staticClass:"priceArea"},[t("div",{staticClass:"priceArea1"},[t("div",{staticClass:"title"},[s._v("价      格")]),t("div",{staticClass:"price"},[t("i",[s._v("¥")]),t("em",[s._v(s._s(s.info.price))])])])])]),t("div",{staticClass:"choose"},[t("div",{staticClass:"chooseArea"},[t("div",{staticClass:"choosed"}),s._l(s.info.spuSaleAttrList,(function(e){return t("dl",{key:e.id},[t("dt",{staticClass:"title"},[s._v("选择"+s._s(e.saleAttrName))]),s._l(e.spuSaleAttrValueList,(function(i){return t("dd",{key:i.id,class:{active:"1"===i.isChecked},on:{click:function(t){return s.changeAttr(i.id,e.spuSaleAttrValueList)}}},[s._v(" "+s._s(i.saleAttrValueName)+" ")])}))],2)}))],2),t("div",{staticClass:"cartWrap"},[t("div",{staticClass:"controls"},[t("input",{staticClass:"itxt",domProps:{value:s.goodsNum},on:{change:function(t){return s.changeGoodsNum("input",t)}}}),t("a",{staticClass:"plus",on:{click:function(t){return s.changeGoodsNum("increment")}}},[s._v("+")]),t("a",{staticClass:"mins",on:{click:function(t){return s.changeGoodsNum("decrement")}}},[s._v("-")])]),t("div",{staticClass:"add"},[t("a",{on:{click:s.addGoodsToCart}},[s._v("加入购物车")])])])])])])]):s._e()],1)},a=[],o=(e(7658),function(){var s=this,t=s._self._c;return s.imgList?.length?t("swiper",{staticClass:"swiper",attrs:{options:s.swiperOption}},[s._l(s.imgList,(function(e){return t("swiper-slide",{key:e.id,staticClass:"item"},[t("img",{attrs:{src:e.imgUrl},on:{click:function(t){return s.$bus.$emit("send-imgurl",e.imgUrl)}}})])})),t("div",{staticClass:"swiper-button-prev",attrs:{slot:"button-prev"},slot:"button-prev"}),t("div",{staticClass:"swiper-button-next",attrs:{slot:"button-next"},slot:"button-next"})],2):s._e()}),n=[],r={name:"ImageList",props:["imgList"],data(){return{swiperOption:{slidesPerView:5,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}}}},c=r,l=e(1001),u=(0,l.Z)(c,o,n,!1,null,"06c1f3c9",null),d=u.exports,m=function(){var s=this,t=s._self._c;return t("div",{staticClass:"spec-preview"},[t("img",{attrs:{src:s.imgUrl||s.url}}),t("div",{staticClass:"event",on:{mousemove:s.move}}),t("div",{staticClass:"big"},[t("img",{ref:"bigImg",attrs:{src:s.imgUrl||s.url}})]),t("div",{ref:"mask",staticClass:"mask"})])},f=[],p={name:"Zoom",props:["url"],data(){return{imgUrl:""}},methods:{move(s){let t=s.offsetX,e=s.offsetY,{mask:i,bigImg:a}=this.$refs,o=t-i.offsetWidth/2,n=e-i.offsetHeight/2;o<0?o=0:o>i.offsetWidth&&(o=i.offsetWidth),n<0?n=0:n>i.offsetHeight&&(n=i.offsetHeight),i.style.left=o+"px",i.style.top=n+"px",a.style.left=-2*o+"px",a.style.top=-2*n+"px"},saveImgUrl(s){this.imgUrl=s}},created(){this.$bus.$on("send-imgurl",this.saveImgUrl)},beforeDestroy(){this.$bus.$off("send-imgurl")}},g=p,v=(0,l.Z)(g,m,f,!1,null,null,null),h=v.exports,C=e(9798),_={name:"Detail",components:{ImageList:d,Zoom:h},data(){return{info:{},goodsNum:1}},methods:{async getGoodsDetailInfo(){const{id:s}=this.$route.params,{code:t,message:e,data:i}=await(0,C.yg)(s);200===t?this.info=i:alert(`商品详情加载失败：${e}`)},changeAttr(s,t){t.forEach((t=>{t.id===s?t.isChecked="1":t.isChecked="0"}))},changeGoodsNum(s,t){switch(s){case"input":const{value:s}=t.target;this.goodsNum=s>=1&&s<=200?parseInt(s):s<1?1:t.target.value=s>200?200:1;break;case"increment":this.goodsNum<200?this.goodsNum+=1:alert("最大购买数量为200");break;case"decrement":this.goodsNum>1?this.goodsNum-=1:alert("最小购买数量为1");break}},async addGoodsToCart(){const{id:s}=this.$route.params,{code:t,message:e}=await(0,C.u1)(s,this.goodsNum);if(200===t){const{skuDefaultImg:s,skuName:t}=this.info.skuInfo,{goodsNum:e}=this,{price:i}=this.info,a=[];this.info.spuSaleAttrList.forEach((s=>{let t=s.spuSaleAttrValueList.find((s=>"1"===s.isChecked));a.push(`${t.saleAttrName}：${t.saleAttrValueName}`)}));const o={name:t,num:e,url:s,price:i,arr:a};sessionStorage.setItem("buyInfo",JSON.stringify(o)),this.$router.push("/addcart_success")}else alert(`加入购物车失败：${e}`)}},async mounted(){this.getGoodsDetailInfo()}},k=_,N=(0,l.Z)(k,i,a,!1,null,"9ebc2fcc",null),I=N.exports}}]);
//# sourceMappingURL=248.f107f792.js.map