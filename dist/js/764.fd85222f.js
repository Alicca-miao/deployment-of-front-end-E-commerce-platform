"use strict";(self["webpackChunksph_230410"]=self["webpackChunksph_230410"]||[]).push([[764],{9764:function(a,e,s){s.r(e),s.d(e,{default:function(){return g}});var t=function(){var a=this,e=a._self._c;return e("div",{staticClass:"outer"},[e("TypeNav"),e("div",{staticClass:"main"},[e("div",{staticClass:"py-container"},[e("div",{staticClass:"bread"},[e("span",{staticClass:"sui-breadcrumb"},[a._v("全部结果:")]),e("ul",{staticClass:"fl sui-tag"},[a.searchParams.categoryName?e("li",{staticClass:"with-x"},[a._v(" 分类："+a._s(a.searchParams.categoryName)+" "),e("i",{on:{click:a.removeCategoryName}},[a._v("×")])]):a._e(),a.searchParams.keyword?e("li",{staticClass:"with-x"},[a._v(" 关键词："+a._s(a.searchParams.keyword)+" "),e("i",{on:{click:a.removeKeyword}},[a._v("×")])]):a._e(),a.searchParams.trademark?e("li",{staticClass:"with-x"},[a._v(" 品牌："+a._s(a.searchParams.trademark.split(":")[1])+" "),e("i",{on:{click:a.removeTrademark}},[a._v("×")])]):a._e(),a._l(a.searchParams.props,(function(s,t){return e("li",{key:t,staticClass:"with-x"},[a._v(" "+a._s(a.formatProps(s))+" "),e("i",{on:{click:function(e){return a.removeProps(t)}}},[a._v("×")])])}))],2)]),a.searchInfo.total?e("SearchSelector",{attrs:{trademarkList:a.searchInfo.trademarkList,attrsList:a.searchInfo.attrsList,sendTrademark:a.saveTrademark},on:{"send-attribute":a.saveAttribute}}):a._e(),a.searchInfo.total?e("div",{staticClass:"details clearfix"},[e("div",{staticClass:"sui-navbar"},[e("div",{staticClass:"navbar-inner filter"},[e("ul",{staticClass:"sui-nav"},[e("li",{class:{active:"1"===a.orderType},on:{click:function(e){return a.changeOrder(1)}}},[e("a",[a._v(" 综合"),e("i",{directives:[{name:"show",rawName:"v-show",value:"1"===a.orderType,expression:"orderType === '1'"}],staticClass:"iconfont",class:a.orderFlag})])]),e("li",{class:{active:"2"===a.orderType},on:{click:function(e){return a.changeOrder(2)}}},[e("a",[a._v(" 价格"),e("i",{directives:[{name:"show",rawName:"v-show",value:"2"===a.orderType,expression:"orderType === '2'"}],staticClass:"iconfont",class:a.orderFlag})])])])])]),e("div",{staticClass:"goods-list"},[e("ul",{staticClass:"yui3-g",on:{click:a.toDetail}},a._l(a.searchInfo.goodsList,(function(s){return e("li",{key:s.id,staticClass:"yui3-u-1-5"},[e("div",{staticClass:"list-wrap"},[e("div",{staticClass:"p-img"},[e("a",[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:s.defaultImg,expression:"g.defaultImg"}],attrs:{"data-id":s.id}})])]),e("div",{staticClass:"price"},[e("strong",[e("em",[a._v("¥")]),e("i",[a._v(a._s(s.price))])])]),e("div",{staticClass:"attr"},[e("a",{attrs:{"data-id":s.id,title:s.title},domProps:{innerHTML:a._s(s.title)}})])])])})),0)]),e("Pagination",{attrs:{total:a.searchInfo.total,pageSize:a.searchParams.pageSize,pageNo:a.searchParams.pageNo,continues:5,sendPageNo:a.savePageNo}})],1):a._e(),a.searchInfo.total?a._e():e("div",{staticClass:"empty"},[e("img",{attrs:{src:"https://static.360buyimg.com/devfe/error-new/1.0.0/css/i/error_06.png",alt:""}}),e("h2",[a._v("搜索结果为空")])])],1)])],1)},r=[],i=(s(7658),function(){var a=this,e=a._self._c;return e("div",{staticClass:"clearfix selt"},[e("div",{staticClass:"type-wrap logo"},[e("div",{staticClass:"fl key brand"},[a._v("品牌")]),e("div",{staticClass:"value logos"},[e("ul",{staticClass:"logo-list"},a._l(a.trademarkList,(function(s){return e("li",{key:s.tmId,on:{click:function(e){return a.sendTrademark(s)}}},[e("a",[a._v(a._s(s.tmName))])])})),0)])]),a._l(a.attrsList,(function(s){return e("div",{key:s.attrId,staticClass:"type-wrap"},[e("div",{staticClass:"fl key"},[a._v(a._s(s.attrName))]),e("div",{staticClass:"fl value"},[e("ul",{staticClass:"type-list"},a._l(s.attrValueList,(function(t,r){return e("li",{key:r},[e("a",{on:{click:function(e){return a.getAttribute(s,t)}}},[a._v(a._s(t))])])})),0)]),e("div",{staticClass:"fl ext"})])}))],2)}),c=[],o={name:"SearchSelector",props:["attrsList","trademarkList","sendTrademark"],methods:{getAttribute(a,e){const{attrId:s,attrName:t}=a,r=`${s}:${e}:${t}`;this.$emit("send-attribute",r)}}},l=o,n=s(1001),d=(0,n.Z)(l,i,c,!1,null,"33711caa",null),h=d.exports,m=s(9798),u={name:"Search",components:{SearchSelector:h},data(){return{searchParams:{category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",props:[],trademark:"",order:"1:desc",pageNo:1,pageSize:5},searchInfo:{}}},computed:{orderType(){return this.searchParams.order.split(":")[0]},orderFlag(){return"asc"===this.searchParams.order.split(":")[1]?"icon-up":"icon-down"}},methods:{async executeSearch(){let{code:a,message:e,data:s}=await(0,m.w1)(this.searchParams);200===a?this.searchInfo=s:alert(`搜索失败：${e}`)},removeCategoryName(){this.$router.push({path:"/search",query:{keyword:this.searchParams.keyword}})},removeKeyword(){const{query:a}=this.$route,e={...a};delete e.keyword,this.$router.push({path:"/search",query:e})},async saveTrademark({tmId:a,tmName:e}){Object.assign(this.searchParams,{trademark:`${a}:${e}`,pageNo:1})},removeTrademark(){this.searchParams.trademark="",this.searchParams.pageNo=1},saveAttribute(a){let e=this.searchParams.props.includes(a);e||(this.searchParams.props.push(a),this.searchParams.pageNo=1)},formatProps(a){return a.split(":")[2]+"："+a.split(":")[1]},removeProps(a){this.searchParams.props.splice(a,1),this.searchParams.pageNo=1},savePageNo(a){this.searchParams.pageNo=a},changeOrder(a){const[e,s]=this.searchParams.order.split(":");let t="";t=a===1*e?e+":"+("asc"===s?"desc":"asc"):a+":desc",Object.assign(this.searchParams,{order:t,pageNo:1})},toDetail(a){const{id:e}=a.target.dataset;e&&this.$router.push({name:"detail",params:{id:e}})}},watch:{$route:{immediate:!0,async handler(a){this.searchParams={...this.searchParams,category1Id:"",category2Id:"",category3Id:"",categoryName:"",keyword:"",pageNo:1,...a.query},this.executeSearch()}},searchParams:{deep:!0,handler(){this.executeSearch()}}},beforeDestroy(){this.$bus.$emit("clear-keyword")}},p=u,v=(0,n.Z)(p,t,r,!1,null,"a60a887a",null),g=v.exports}}]);
//# sourceMappingURL=764.fd85222f.js.map